# Добавляем в модель данных дополнительные индексы и ограничения

## Цель

Научиться применять индексы в реальном проекте

## Задачи

1. Проводим анализ возможных запросов\отчетов\поиска данных
2. Предполагаем возможную кардинальность поля
3. Создаем дополнительные индексы - простые или композитные
4. На каждый индекс пишем краткое описание зачем он нужен (почему по этому полю\полям)
5. Думаем какие логические ограничения в БД нужно добавить - например какие
  поля должны быть уникальны, в какие нужно добавить условия, чтобы не нарушить
  бизнес логику. Пример - нельзя провести операцию по переводу средств на
  отрицательную сумму
6. Создаем ограничения по выбранным полям

---

## Решение

### Анализ

- Products: У нас интернет магазин, и поэтому во сновном люди будут искать продукты
  - title: Будет поиск и сортировка по названию. Название продукта не будет
    повторяться
  - price: Будет сортировка и фильтрация по ценам, цена всегда будет
    положительной
  - created_at: Будет сортировка по самым новым и старым продуктам
- Addresses: Это таблица, которая объеденяется со многими другими, поэтому
  желательно хранить в ней индексы
  - country, city: Мы будем искать покупателей по странам и городам и делать
    аналитику где наши клиенты находяться, или будем смотреть где находятся
    поставщики, и взависемости от этого давать им заказ
- Categories
  - title: Категории не будут повторяться
- Producers
  - title: Названия не могут повторяться, и мы будем делать выборку по названиям
    компаний

### Индексы, Ограничения и Условия

- products
  - title
  - price (CHECK >= 0)
  - created_at
- addresses
  - country
  - city
- categories
  - title (UNIQUE)
- purchases
  - amount (CHECK >= 0)
- producers
  - title (UNIQUE)
